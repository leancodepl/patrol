syntax = "proto3";
package patrol;

option java_package = "pl.leancode.automatorserver";

message OpenAppCommand { string appId = 1; }

message TapCommand {
  string appId = 1;
  Selector selector = 2;
}

message DoubleTapCommand {
  string appId = 1;
  Selector selector = 2;
}

message EnterTextBySelectorCommand {
  string appId = 1;
  string data = 2;
  Selector selector = 3;
}

message EnterTextByIndexCommand {
  string appId = 1;
  string data = 2;
  uint32 index = 3;
}

message TapOnNotificationByIndexCommand { uint32 index = 1; }

message TapOnNotificationBySelectorCommand { Selector selector = 1; }

message SwipeCommand {
  float startX = 1;
  float startY = 2;
  float endX = 3;
  float endY = 4;
  uint32 steps = 5;
}

message HandlePermissionCommand {
  Code code = 1;

  enum Code {
    WHILE_USING = 0;
    ONLY_THIS_TIME = 1;
    DENIED = 2;
  }
}

message Selector {
  optional string text = 1;
  optional string textStartsWith = 2;
  optional string textContains = 3;
  optional string className = 4;
  optional string contentDescription = 5;
  optional string contentDescriptionStartsWith = 6;
  optional string contentDescriptionContains = 7;
  optional string resourceId = 8;
  optional uint32 instance = 9;
  optional bool enabled = 10;
  optional bool focused = 11;
  optional string pkg = 12;
}

// Represents a native UI control.
//
// On Android, this is `android.view.View`.
message NativeWidget {
  string className = 1;
  string text = 2;
  string contentDescription = 3;
  bool focused = 4;
  bool enabled = 5;
  int32 childCount = 6;
  string resourceName = 7;
  string applicationPackage = 8;
  repeated NativeWidget children = 9;
}

message NativeWidgetsQuery { Selector selector = 1; }

// Represents a notification visible in the notification shade.
message Notification {
  string appName = 1;
  string title = 2;
  string content = 3;
}

message NotificationsQueryResponse { repeated Notification notifications = 1; }

message NativeWidgetsQueryResponse { repeated NativeWidget nativeWidgets = 1; }
